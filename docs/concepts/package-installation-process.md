---
title: Processus d’installation d’un package
description: Informations détaillées sur le processus d’installation d’un package
author: karann-msft
ms.author: karann
ms.date: 06/20/2019
ms.topic: conceptual
ms.openlocfilehash: 5676239bedb7f8fbe9f74725864afd297405d5c1
ms.sourcegitcommit: 0dea3b153ef823230a9d5f38351b7cef057cb299
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/12/2019
ms.locfileid: "67842332"
---
# <a name="what-happens-when-a-nuget-package-is-installed"></a><span data-ttu-id="e8020-103">Processus d’installation d’un package NuGet</span><span class="sxs-lookup"><span data-stu-id="e8020-103">What happens when a NuGet package is installed?</span></span>

<span data-ttu-id="e8020-104">En termes simples, les différents outils NuGet créent généralement une référence à un package dans le fichier projet ou `packages.config`, puis effectuent une restauration de package, ce qui installe le package proprement dit.</span><span class="sxs-lookup"><span data-stu-id="e8020-104">Simply said, the different NuGet tools typically create a reference to a package in the project file or `packages.config`, then perform a package restore, which effectively installs the package.</span></span> <span data-ttu-id="e8020-105">`nuget install` fait figure d’exception : il développe simplement le package dans un dossier `packages`, sans modifier les autres fichiers.</span><span class="sxs-lookup"><span data-stu-id="e8020-105">The exception is `nuget install`, which only expands the package into a `packages` folder and does not modify any other files.</span></span>

<span data-ttu-id="e8020-106">Le processus général se décompose ainsi :</span><span class="sxs-lookup"><span data-stu-id="e8020-106">The general process is as follows:</span></span>

1. <span data-ttu-id="e8020-107">(Tous les outils à l’exception de `nuget.exe`) Enregistrez la version et l’identificateur du package dans le fichier projet ou `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="e8020-107">(All tools except `nuget.exe`) Record the package identifier and version into the project file or `packages.config`.</span></span>

   <span data-ttu-id="e8020-108">Si l’outil d’installation est Visual Studio ou l’interface CLI dotnet, l’outil essaie d’abord d’installer le package.</span><span class="sxs-lookup"><span data-stu-id="e8020-108">If the installation tool is Visual Studio or the dotnet CLI, the tool first attempts to install the package.</span></span> <span data-ttu-id="e8020-109">S’il est incompatible, le package n’est pas ajouté au fichier projet ou `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="e8020-109">If it's incompatible, the package is not added to the project file or `packages.config`.</span></span>

2. <span data-ttu-id="e8020-110">Acquérir le package :</span><span class="sxs-lookup"><span data-stu-id="e8020-110">Acquire the package:</span></span>
   - <span data-ttu-id="e8020-111">Déterminez si le package (en fonction du numéro de version et de l’identificateur précis) est déjà installé dans le dossier *global-packages*, comme l’explique la page [Gérer les dossiers de packages globaux et de cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="e8020-111">Check if the package (by exact identifer and version number) is already installed in the *global-packages* folder as described on [Managing the global packages and cache folders](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

   - <span data-ttu-id="e8020-112">Si le package ne se trouve pas dans le dossier *global-packages*, tentez de le récupérer parmi les sources listées dans les [fichiers de configuration](../consume-packages/Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="e8020-112">If the package is not in the *global-packages* folder, attempt to retrieve it from the sources listed listed in the [configuration files](../consume-packages/Configuring-NuGet-Behavior.md).</span></span> <span data-ttu-id="e8020-113">Pour les sources en ligne, tentez tout d’abord de récupérer le package du cache HTTP, sauf si vous avez spécifié `-NoCache` avec des commandes de `nuget.exe`, ou spécifié `--no-cache` avec la commande `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="e8020-113">For online sources, attempt first to retrieve the package from the HTTP cache unless `-NoCache` is specified with `nuget.exe` commands or `--no-cache` is specified with `dotnet restore`.</span></span> <span data-ttu-id="e8020-114">(Visual Studio et `dotnet add package` utilisent toujours le cache.) Si un package est utilisé à partir du cache, « CACHE » s’affiche en sortie.</span><span class="sxs-lookup"><span data-stu-id="e8020-114">(Visual Studio and `dotnet add package` always use the cache.) If a package is used from the cache, "CACHE" appears in the output.</span></span> <span data-ttu-id="e8020-115">Le cache a un délai d’expiration de 30 minutes.</span><span class="sxs-lookup"><span data-stu-id="e8020-115">The cache has an expiration time of 30 minutes.</span></span>

   - <span data-ttu-id="e8020-116">Si le package ne se trouve pas dans le cache HTTP, tentez de le télécharger parmi les sources listées dans la configuration.</span><span class="sxs-lookup"><span data-stu-id="e8020-116">If the package is not in the HTTP cache, attempt to download it from the sources listed in the configuration.</span></span> <span data-ttu-id="e8020-117">Si un package est téléchargé, « GET » et « OK » apparaissent en sortie.</span><span class="sxs-lookup"><span data-stu-id="e8020-117">If a package is downloaded, "GET" and "OK" appear in the output.</span></span> <span data-ttu-id="e8020-118">NuGet journalise le trafic HTTP avec le niveau de commentaires normal.</span><span class="sxs-lookup"><span data-stu-id="e8020-118">NuGet logs http traffic on normal verbosity.</span></span>

   - <span data-ttu-id="e8020-119">Si aucune source ne permet de récupérer le package, l’installation échoue à ce stade, avec une erreur du type [NU1103](../reference/errors-and-warnings/NU1103.md).</span><span class="sxs-lookup"><span data-stu-id="e8020-119">If the package cannot be successfully acquired from any sources, installation fails at this point with an error such as [NU1103](../reference/errors-and-warnings/NU1103.md).</span></span> <span data-ttu-id="e8020-120">Notez que les erreurs des commandes `nuget.exe` affichent uniquement la dernière source vérifiée, mais implique que le package n’était disponible dans aucune source.</span><span class="sxs-lookup"><span data-stu-id="e8020-120">Note that errors from `nuget.exe` commands show only the last source checked, but implies that the package wasn't available from any source.</span></span>

   <span data-ttu-id="e8020-121">Lors de l’acquisition du package, l’ordre des sources de la configuration NuGet peut s’appliquer :</span><span class="sxs-lookup"><span data-stu-id="e8020-121">When acquiring the package, the order of sources in the NuGet configuration may apply:</span></span>

   - <span data-ttu-id="e8020-122">NuGet consulte les partages réseau et le dossier local de sources avant de parcourir les sources HTTP.</span><span class="sxs-lookup"><span data-stu-id="e8020-122">NuGet checks sources local folder and network shares before checking HTTP sources.</span></span>

3. <span data-ttu-id="e8020-123">Enregistrez une copie du package et d’autres informations dans le dossier *http-cache*, comme cela est expliqué dans [Gérer les dossiers de packages globaux et de cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="e8020-123">Save a copy of the package and other information in the *http-cache* folder as described on [Managing the global packages and cache folders](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

4. <span data-ttu-id="e8020-124">S’il a été téléchargé, installez le package dans le dossier *global-packages* de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="e8020-124">If downloaded, install the package into the per-user *global-packages* folder.</span></span> <span data-ttu-id="e8020-125">NuGet crée un sous-dossier par identificateur de package, puis un sous-dossier par version installée du package.</span><span class="sxs-lookup"><span data-stu-id="e8020-125">NuGet creates a subfolder for each package identifier, then creates subfolders for each installed version of the package.</span></span>

5. <span data-ttu-id="e8020-126">NuGet installe les dépendances de package nécessaires.</span><span class="sxs-lookup"><span data-stu-id="e8020-126">NuGet installs package dependencies as required.</span></span> <span data-ttu-id="e8020-127">Ce processus est susceptible de mettre à jour les versions de package, comme l’explique la page [Résolution de dépendances](../consume-packages/dependency-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="e8020-127">This process might update package versions in the process, as described in [Dependency Resolution](../consume-packages/dependency-resolution.md).</span></span>

6. <span data-ttu-id="e8020-128">Mettez à jour les dossiers et les fichiers projet :</span><span class="sxs-lookup"><span data-stu-id="e8020-128">Update other project files and folders:</span></span>

    - <span data-ttu-id="e8020-129">Pour les projets qui utilisent PackageReference, mettez à jour le graphique de dépendance de package stocké dans `obj/project.assets.json`.</span><span class="sxs-lookup"><span data-stu-id="e8020-129">For projects using PackageReference, update the package dependency graph stored in `obj/project.assets.json`.</span></span> <span data-ttu-id="e8020-130">Le contenu des packages proprement dits n’est copié dans aucun dossier du projet.</span><span class="sxs-lookup"><span data-stu-id="e8020-130">Package contents themselves are not copied into any project folder.</span></span>
    - <span data-ttu-id="e8020-131">Mettez à jour `app.config` et/ou `web.config` si le package utilise des [transformations de fichiers config et source](../create-packages/source-and-config-file-transformations.md).</span><span class="sxs-lookup"><span data-stu-id="e8020-131">Update `app.config` and/or `web.config` if the package uses [source and config file transformations](../create-packages/source-and-config-file-transformations.md).</span></span>

7. <span data-ttu-id="e8020-132">(Visual Studio uniquement) Affichez le fichier Lisez-moi du package, le cas échéant, dans une fenêtre Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e8020-132">(Visual Studio only) Display the package's readme file, if available, in a Visual Studio window.</span></span>

<span data-ttu-id="e8020-133">Bénéficiez d’un codage productif avec les packages NuGet !</span><span class="sxs-lookup"><span data-stu-id="e8020-133">Enjoy your productive coding with NuGet packages!</span></span>
