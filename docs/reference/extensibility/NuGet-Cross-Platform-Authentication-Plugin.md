---
title: Plug-in d’authentification multiplateforme NuGet
description: Plug-ins d’authentification inter-plateforme NuGet pour NuGet. exe, dotnet. exe, MSBuild. exe et Visual Studio
author: nkolev92
ms.author: nikolev
ms.date: 07/01/2018
ms.topic: conceptual
ms.openlocfilehash: a716737343ea826d28da6de46c32ca73aef590bd
ms.sourcegitcommit: efc18d484fdf0c7a8979b564dcb191c030601bb4
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/18/2019
ms.locfileid: "68317277"
---
# <a name="nuget-cross-platform-authentication-plugin"></a><span data-ttu-id="d29e3-103">Plug-in d’authentification multiplateforme NuGet</span><span class="sxs-lookup"><span data-stu-id="d29e3-103">NuGet cross platform authentication plugin</span></span>

<span data-ttu-id="d29e3-104">Dans la version 4.8 +, tous les clients NuGet (NuGet. exe, Visual Studio, dotnet. exe et MSBuild. exe) peuvent utiliser un plug-in d’authentification basé sur le modèle de [plug-ins inter-plateforme NuGet](NuGet-Cross-Platform-Plugins.md) .</span><span class="sxs-lookup"><span data-stu-id="d29e3-104">In version 4.8+, all NuGet clients (NuGet.exe, Visual Studio, dotnet.exe and MSBuild.exe) can use an authentication plugin built on top of the [NuGet cross platform plugins](NuGet-Cross-Platform-Plugins.md) model.</span></span>

## <a name="authentication-in-dotnetexe"></a><span data-ttu-id="d29e3-105">Authentification dans dotnet. exe</span><span class="sxs-lookup"><span data-stu-id="d29e3-105">Authentication in dotnet.exe</span></span>

<span data-ttu-id="d29e3-106">Visual Studio et NuGet. exe sont interactifs par défaut.</span><span class="sxs-lookup"><span data-stu-id="d29e3-106">Visual Studio and NuGet.exe are by default interactive.</span></span> <span data-ttu-id="d29e3-107">NuGet. exe contient un commutateur pour le rendre [non interactif](../nuget-exe-CLI-Reference.md).</span><span class="sxs-lookup"><span data-stu-id="d29e3-107">NuGet.exe contains a switch to make it [non interactive](../nuget-exe-CLI-Reference.md).</span></span>
<span data-ttu-id="d29e3-108">En outre, les plug-ins NuGet. exe et Visual Studio invitent l’utilisateur à entrer des données.</span><span class="sxs-lookup"><span data-stu-id="d29e3-108">Additionally the NuGet.exe and Visual Studio plugins prompt the user for input.</span></span>
<span data-ttu-id="d29e3-109">Dans dotnet. exe, il n’y a aucune invite et la valeur par défaut est non interactive.</span><span class="sxs-lookup"><span data-stu-id="d29e3-109">In dotnet.exe there is no prompting and the default is non interactive.</span></span>

<span data-ttu-id="d29e3-110">Le mécanisme d’authentification dans dotnet. exe est le workflow de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="d29e3-110">The authentication mechanism in dotnet.exe is device flow.</span></span> <span data-ttu-id="d29e3-111">Lorsque l’opération de restauration ou d’ajout de package est exécutée de manière interactive, l’opération se bloque et les instructions de l’utilisateur sur la façon d’effectuer les authentifications sont fournies sur la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="d29e3-111">When the restore or add package operation is run interactively, the operation blocks and instructions to the user how to complete the authentications will be provided on the command line.</span></span>
<span data-ttu-id="d29e3-112">Lorsque l’utilisateur termine l’authentification, l’opération se poursuit.</span><span class="sxs-lookup"><span data-stu-id="d29e3-112">When the user completes the authentication the operation will continue.</span></span>

<span data-ttu-id="d29e3-113">Pour que l’opération soit interactive, l’une `--interactive`d’elles doit réussir.</span><span class="sxs-lookup"><span data-stu-id="d29e3-113">To make the operation interactive, one should pass `--interactive`.</span></span>
<span data-ttu-id="d29e3-114">Actuellement, seules les `dotnet restore` commandes `dotnet add package` explicites et explicites prennent en charge un commutateur interactif.</span><span class="sxs-lookup"><span data-stu-id="d29e3-114">Currently only the explicit `dotnet restore` and `dotnet add package` commands support an interactive switch.</span></span>
<span data-ttu-id="d29e3-115">Il n’existe aucun commutateur interactif `dotnet build` sur `dotnet publish`et.</span><span class="sxs-lookup"><span data-stu-id="d29e3-115">There is no interactive switch on `dotnet build` and `dotnet publish`.</span></span>

## <a name="authentication-in-msbuild"></a><span data-ttu-id="d29e3-116">Authentification dans MSBuild</span><span class="sxs-lookup"><span data-stu-id="d29e3-116">Authentication in MSBuild</span></span>

<span data-ttu-id="d29e3-117">À l’instar de dotnet. exe, MSBuild. exe est par défaut non interactif. le mécanisme d’authentification MSBuild. exe est le workflow de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="d29e3-117">Similar to dotnet.exe, MSBuild.exe is by default non interactive the MSBuild.exe authentication mechanism is device flow.</span></span>
<span data-ttu-id="d29e3-118">Pour permettre à la restauration de s’interrompre et d’attendre l’authentification, `msbuild -t:restore -p:NuGetInteractive="true"`appelez Restore with.</span><span class="sxs-lookup"><span data-stu-id="d29e3-118">To allow the restore to pause and wait for authentication, call restore with `msbuild -t:restore -p:NuGetInteractive="true"`.</span></span>

## <a name="creating-a-cross-platform-authentication-plugin"></a><span data-ttu-id="d29e3-119">Création d’un plug-in d’authentification multiplateforme</span><span class="sxs-lookup"><span data-stu-id="d29e3-119">Creating a cross platform authentication plugin</span></span>

<span data-ttu-id="d29e3-120">Vous trouverez un exemple d’implémentation dans le [plug-in du fournisseur d’informations d’identification Microsoft](https://github.com/Microsoft/artifacts-credprovider).</span><span class="sxs-lookup"><span data-stu-id="d29e3-120">A sample implementation can be found in [Microsoft Credential Provider plugin](https://github.com/Microsoft/artifacts-credprovider).</span></span>

<span data-ttu-id="d29e3-121">Il est très important que les plug-ins soient conformes aux exigences de sécurité stipulées par les outils clients NuGet.</span><span class="sxs-lookup"><span data-stu-id="d29e3-121">It's very important that the plugins conforms to the security requirements set forth by the NuGet client tools.</span></span>
<span data-ttu-id="d29e3-122">La version minimale requise pour qu’un plug-in soit un plug-in d’authentification est *2.0.0*.</span><span class="sxs-lookup"><span data-stu-id="d29e3-122">The minimum required version for a plugin to be an authentication plugin is *2.0.0*.</span></span>
<span data-ttu-id="d29e3-123">NuGet effectue le protocole de transfert avec le plug-in et la requête pour les revendications d’opération prises en charge.</span><span class="sxs-lookup"><span data-stu-id="d29e3-123">NuGet will perform the handshake with the plugin and query for the supported operation claims.</span></span>
<span data-ttu-id="d29e3-124">Pour plus d’informations sur les messages spécifiques, reportez-vous aux [messages de protocole](NuGet-Cross-Platform-Plugins.md#protocol-messages-index) du plug-in NuGet Cross Platform.</span><span class="sxs-lookup"><span data-stu-id="d29e3-124">Please refer to the NuGet cross platform plugin [protocol messages](NuGet-Cross-Platform-Plugins.md#protocol-messages-index) for more details about the specific messages.</span></span>

<span data-ttu-id="d29e3-125">NuGet définit le niveau de journalisation et fournit les informations de proxy au plug-in, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="d29e3-125">NuGet will set the log level and provide proxy information to the plugin when applicable.</span></span>
<span data-ttu-id="d29e3-126">La journalisation dans la console NuGet n’est acceptable qu’une fois que NuGet a défini le niveau de journalisation sur le plug-in.</span><span class="sxs-lookup"><span data-stu-id="d29e3-126">Logging to the NuGet console is only acceptable after NuGet has set the log level to the plugin.</span></span>

- <span data-ttu-id="d29e3-127">Comportement d’authentification du plug-in .NET Framework</span><span class="sxs-lookup"><span data-stu-id="d29e3-127">.NET Framework plugin authentication behavior</span></span>

<span data-ttu-id="d29e3-128">Dans .NET Framework, les plug-ins sont autorisés à inviter un utilisateur à entrer des données, sous la forme d’une boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="d29e3-128">In .NET Framework, the plugins are allowed to prompt a user for input, in the form of a dialog.</span></span>

- <span data-ttu-id="d29e3-129">Comportement d’authentification du plug-in .NET Core</span><span class="sxs-lookup"><span data-stu-id="d29e3-129">.NET Core plugin authentication behavior</span></span>

<span data-ttu-id="d29e3-130">Dans .NET Core, une boîte de dialogue ne peut pas être affichée.</span><span class="sxs-lookup"><span data-stu-id="d29e3-130">In .NET Core, a dialog cannot be shown.</span></span> <span data-ttu-id="d29e3-131">Les plug-ins doivent utiliser le workflow de l’appareil pour s’authentifier.</span><span class="sxs-lookup"><span data-stu-id="d29e3-131">The plugins should use device flow to authenticate.</span></span>
<span data-ttu-id="d29e3-132">Le plug-in peut envoyer des messages de journal à NuGet avec des instructions à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d29e3-132">The plugin can send log messages to NuGet with instructions to the user.</span></span>
<span data-ttu-id="d29e3-133">Notez que la journalisation est disponible une fois que le niveau de journalisation a été défini sur le plug-in.</span><span class="sxs-lookup"><span data-stu-id="d29e3-133">Note that logging is available after the log level has been set to the plugin.</span></span>
<span data-ttu-id="d29e3-134">NuGet n’effectue aucune entrée interactive à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="d29e3-134">NuGet will not take any interactive input from the command line.</span></span>

<span data-ttu-id="d29e3-135">Lorsque le client appelle le plug-in avec des informations d’identification d’authentification, les plug-ins doivent être conformes au commutateur d’interactivité et respecter le commutateur de boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="d29e3-135">When the client calls the plugin with a Get Authentication Credentials, the plugins need to conform to the interactivity switch and respect the dialog switch.</span></span> 

<span data-ttu-id="d29e3-136">Le tableau suivant résume la façon dont le plug-in doit se comporter pour toutes les combinaisons.</span><span class="sxs-lookup"><span data-stu-id="d29e3-136">The following table summarizes how the plugin should behave for all combinations.</span></span>

| <span data-ttu-id="d29e3-137">IsNonInteractive</span><span class="sxs-lookup"><span data-stu-id="d29e3-137">IsNonInteractive</span></span> | <span data-ttu-id="d29e3-138">CanShowDialog</span><span class="sxs-lookup"><span data-stu-id="d29e3-138">CanShowDialog</span></span> | <span data-ttu-id="d29e3-139">Comportement du plug-in</span><span class="sxs-lookup"><span data-stu-id="d29e3-139">Plugin behavior</span></span> |
| ---------------- | ------------- | --------------- |
| <span data-ttu-id="d29e3-140">true</span><span class="sxs-lookup"><span data-stu-id="d29e3-140">true</span></span> | <span data-ttu-id="d29e3-141">true</span><span class="sxs-lookup"><span data-stu-id="d29e3-141">true</span></span> | <span data-ttu-id="d29e3-142">Le commutateur IsNonInteractive est prioritaire sur le commutateur de boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="d29e3-142">The IsNonInteractive switch takes precedence over the dialog switch.</span></span> <span data-ttu-id="d29e3-143">Le plug-in n’est pas autorisé à dépiler une boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="d29e3-143">The plugin is not allowed to pop a dialog.</span></span> <span data-ttu-id="d29e3-144">Cette combinaison est uniquement valide pour les plug-ins .NET Framework</span><span class="sxs-lookup"><span data-stu-id="d29e3-144">This combination is only valid for .NET Framework plugins</span></span> |
| <span data-ttu-id="d29e3-145">true</span><span class="sxs-lookup"><span data-stu-id="d29e3-145">true</span></span> | <span data-ttu-id="d29e3-146">false</span><span class="sxs-lookup"><span data-stu-id="d29e3-146">false</span></span> | <span data-ttu-id="d29e3-147">Le commutateur IsNonInteractive est prioritaire sur le commutateur de boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="d29e3-147">The IsNonInteractive switch takes precedence over the dialog switch.</span></span> <span data-ttu-id="d29e3-148">Le plug-in n’est pas autorisé à bloquer.</span><span class="sxs-lookup"><span data-stu-id="d29e3-148">The plugin is not allowed to block.</span></span> <span data-ttu-id="d29e3-149">Cette combinaison est uniquement valide pour les plug-ins .NET Core</span><span class="sxs-lookup"><span data-stu-id="d29e3-149">This combination is only valid for .NET Core plugins</span></span> |
| <span data-ttu-id="d29e3-150">false</span><span class="sxs-lookup"><span data-stu-id="d29e3-150">false</span></span> | <span data-ttu-id="d29e3-151">true</span><span class="sxs-lookup"><span data-stu-id="d29e3-151">true</span></span> | <span data-ttu-id="d29e3-152">Le plug-in doit afficher une boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="d29e3-152">The plugin should show a dialog.</span></span> <span data-ttu-id="d29e3-153">Cette combinaison est uniquement valide pour les plug-ins .NET Framework</span><span class="sxs-lookup"><span data-stu-id="d29e3-153">This combination is only valid for .NET Framework plugins</span></span> |
| <span data-ttu-id="d29e3-154">false</span><span class="sxs-lookup"><span data-stu-id="d29e3-154">false</span></span> | <span data-ttu-id="d29e3-155">false</span><span class="sxs-lookup"><span data-stu-id="d29e3-155">false</span></span> | <span data-ttu-id="d29e3-156">Le plug-in ne peut pas afficher une boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="d29e3-156">The plugin should/can not show a dialog.</span></span> <span data-ttu-id="d29e3-157">Le plug-in doit utiliser le workflow de l’appareil pour s’authentifier en consignant un message d’instruction via l’enregistreur d’événements.</span><span class="sxs-lookup"><span data-stu-id="d29e3-157">The plugin should use device flow to authenticate by logging an instruction message via the logger.</span></span> <span data-ttu-id="d29e3-158">Cette combinaison est uniquement valide pour les plug-ins .NET Core</span><span class="sxs-lookup"><span data-stu-id="d29e3-158">This combination is only valid for .NET Core plugins</span></span> |

<span data-ttu-id="d29e3-159">Pour plus d’informations sur l’écriture d’un plug-in, reportez-vous aux spécifications suivantes.</span><span class="sxs-lookup"><span data-stu-id="d29e3-159">Please refer to the following specs before writing a plugin.</span></span>

- [<span data-ttu-id="d29e3-160">Plug-in de téléchargement de package NuGet</span><span class="sxs-lookup"><span data-stu-id="d29e3-160">NuGet Package Download Plugin</span></span>](https://github.com/NuGet/Home/wiki/NuGet-Package-Download-Plugin)
- [<span data-ttu-id="d29e3-161">Plug-in d’authentification Cross plat NuGet</span><span class="sxs-lookup"><span data-stu-id="d29e3-161">NuGet cross plat authentication plugin</span></span>](https://github.com/NuGet/Home/wiki/NuGet-cross-plat-authentication-plugin)
